defmodule CafeWeb.Components.PlayerControls do
  use CafeWeb, :live_component

  def mount(socket) do
    {:ok,
     socket
     |> assign(:volume, 50)
     |> assign(:playing, true)
     |> assign(:muted, true)}
  end

  def render(assigns) do
    ~H"""
    <div class="relative block width-full z-[2]">
      <div class="flex items-center">
        <%= if @playing do %>
          <button
            phx-click="pause"
            phx-target={@myself}
            class="px-4 py-2 text-white hover:text-shadow-green text-shadow-green"
          >
            <svg
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              class="w-4 h-4 hover:svg-shadow-green svg-shadow-green"
            >
              <path
                d="M2.25 6.25C2.25 4.84987 2.25 4.1498 2.52248 3.61502C2.76217 3.14462 3.14462 2.76217 3.61502 2.52248C4.1498 2.25 4.84987 2.25 6.25 2.25H6.75C8.15013 2.25 8.8502 2.25 9.38498 2.52248C9.85538 2.76217 10.2378 3.14462 10.4775 3.61502C10.75 4.1498 10.75 4.84987 10.75 6.25V17.75C10.75 19.1501 10.75 19.8502 10.4775 20.385C10.2378 20.8554 9.85538 21.2378 9.38498 21.4775C8.8502 21.75 8.15013 21.75 6.75 21.75H6.25C4.84987 21.75 4.1498 21.75 3.61502 21.4775C3.14462 21.2378 2.76217 20.8554 2.52248 20.385C2.25 19.8502 2.25 19.1501 2.25 17.75V6.25Z"
                fill="currentColor"
              />
              <path
                d="M17.25 2.25C15.8499 2.25 15.1498 2.25 14.615 2.52248C14.1446 2.76217 13.7622 3.14462 13.5225 3.61502C13.25 4.1498 13.25 4.84987 13.25 6.25V17.75C13.25 19.1501 13.25 19.8502 13.5225 20.385C13.7622 20.8554 14.1446 21.2378 14.615 21.4775C15.1498 21.75 15.8499 21.75 17.25 21.75H17.75C19.1501 21.75 19.8502 21.75 20.385 21.4775C20.8554 21.2378 21.2378 20.8554 21.4775 20.385C21.75 19.8502 21.75 19.1501 21.75 17.75V6.25C21.75 4.84987 21.75 4.1498 21.4775 3.61502C21.2378 3.14462 20.8554 2.76217 20.385 2.52248C19.8502 2.25 19.1501 2.25 17.75 2.25H17.25Z"
                fill="currentColor"
              />
            </svg>
          </button>
        <% else %>
          <button
            phx-click="play"
            phx-target={@myself}
            class="px-4 py-2 text-white hover:text-shadow-green text-shadow-green"
          >
            <svg
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              class="w-4 h-4 hover:svg-shadow-green svg-shadow-green"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M10.1186 2.63788C8.5271 1.66527 7.73133 1.17897 7.07571 1.23632C6.50412 1.28632 5.98153 1.57941 5.64081 2.04106C5.25 2.57059 5.25 3.50319 5.25 5.36838V18.6314C5.25 20.4966 5.25 21.4292 5.64081 21.9587C5.98153 22.4204 6.50412 22.7135 7.07571 22.7635C7.73133 22.8208 8.5271 22.3345 10.1186 21.3619L20.9702 14.7304C22.4475 13.8276 23.1861 13.3762 23.438 12.7951C23.6578 12.2877 23.6578 11.712 23.438 11.2047C23.1861 10.6236 22.4475 10.1722 20.9702 9.26939L10.1186 2.63788Z"
                fill="currentColor"
              />
            </svg>
          </button>
        <% end %>
        <div class="station-buttons px-2">
          <button
            phx-click="prev_station"
            phx-target={@myself}
            class="px-2 py-2 text-white hover:text-shadow-green text-shadow-green"
          >
            <svg
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              class="w-4 h-4 hover:svg-shadow-green svg-shadow-green"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M2.80048 14.692C1.40694 13.7961 0.710166 13.3482 0.469506 12.7787C0.259227 12.281 0.259227 11.7194 0.469506 11.2218C0.710166 10.6522 1.40694 10.2043 2.80048 9.30844L10.4243 4.40743C11.5003 3.71569 12.0383 3.36983 12.4735 3.30903C13.3466 3.18706 14.1965 3.6511 14.566 4.45145C14.7502 4.85039 14.7502 5.48998 14.7502 6.76918L17.8196 4.79602C19.4255 3.76364 20.2285 3.24745 20.8925 3.29488C21.4711 3.33621 22.0034 3.62677 22.351 4.09117C22.75 4.62409 22.75 5.57866 22.75 7.48779V16.5126C22.75 18.4218 22.75 19.3763 22.351 19.9093C22.0034 20.3737 21.4711 20.6642 20.8925 20.7055C20.2285 20.753 19.4255 20.2368 17.8196 19.2044L14.7502 17.2313C14.7502 18.5104 14.7502 19.15 14.566 19.549C14.1965 20.3493 13.3466 20.8134 12.4735 20.6914C12.0383 20.6306 11.5003 20.2847 10.4243 19.593L2.80048 14.692Z"
                fill="currentColor"
              />
            </svg>
          </button>
          <button
            phx-click="next_station"
            phx-target={@myself}
            class="px-2 py-2 text-white hover:text-shadow-green text-shadow-green"
          >
            <svg
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              class="transform rotate-180 w-4 h-4 hover:svg-shadow-green svg-shadow-green"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M2.80048 14.692C1.40694 13.7961 0.710166 13.3482 0.469506 12.7787C0.259227 12.281 0.259227 11.7194 0.469506 11.2218C0.710166 10.6522 1.40694 10.2043 2.80048 9.30844L10.4243 4.40743C11.5003 3.71569 12.0383 3.36983 12.4735 3.30903C13.3466 3.18706 14.1965 3.6511 14.566 4.45145C14.7502 4.85039 14.7502 5.48998 14.7502 6.76918L17.8196 4.79602C19.4255 3.76364 20.2285 3.24745 20.8925 3.29488C21.4711 3.33621 22.0034 3.62677 22.351 4.09117C22.75 4.62409 22.75 5.57866 22.75 7.48779V16.5126C22.75 18.4218 22.75 19.3763 22.351 19.9093C22.0034 20.3737 21.4711 20.6642 20.8925 20.7055C20.2285 20.753 19.4255 20.2368 17.8196 19.2044L14.7502 17.2313C14.7502 18.5104 14.7502 19.15 14.566 19.549C14.1965 20.3493 13.3466 20.8134 12.4735 20.6914C12.0383 20.6306 11.5003 20.2847 10.4243 19.593L2.80048 14.692Z"
                fill="currentColor"
              />
            </svg>
          </button>
        </div>
        <div class="volume-buttons px-2">
          <div id={"volume-bar-#{@id}"} class="flex gap-1 p-1 select-none cursor-pointer">
            <%= for block <- 1..10 do %>
              <div
                class={[
                  "w-3 h-4 rounded-sm",
                  if(block <= div(@volume, 10),
                    do: "bg-white/90",
                    else: "bg-green-800/50"
                  )
                ]}
                phx-click="set_volume"
                phx-value-volume={block * 10}
                phx-target={@myself}
              >
              </div>
            <% end %>
          </div>
        </div>
        <div class="mute-buttons px-2">
          <button
            phx-click="mute"
            phx-target={@myself}
            class="px-2 py-2 text-white hover:text-shadow-green text-shadow-green"
          >
            <svg
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              class="w-4 h-4 hover:svg-shadow-green svg-shadow-green"
            >
              <path
                :if={@muted}
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M14.6 3.92722C14.75 4.34048 14.75 5.23753 14.75 7.03162L14.75 16.9689L14.75 16.969C14.75 18.763 14.75 19.6601 14.6 20.0733C14.0304 21.6426 12.1122 22.2234 10.7678 21.2336C10.4137 20.973 9.91616 20.2266 8.92099 18.7338L8.92097 18.7338L8.92096 18.7338C8.64524 18.3202 8.50738 18.1134 8.35218 17.9372C7.7951 17.3046 7.02842 16.8943 6.19304 16.7816C5.96031 16.7503 5.71177 16.7503 5.2147 16.7503L4.87932 16.7503C3.82764 16.7503 3.3018 16.7503 2.88152 16.5946C2.19794 16.3413 1.65894 15.8023 1.4057 15.1187C1.25 14.6985 1.25 14.1726 1.25 13.121L1.25 10.8796C1.25 9.82792 1.25 9.30208 1.4057 8.8818C1.65894 8.19821 2.19794 7.65921 2.88152 7.40597C3.3018 7.25027 3.82764 7.25027 4.87932 7.25027L5.2147 7.25027L5.21471 7.25027C5.71178 7.25027 5.96031 7.25027 6.19304 7.2189C7.02842 7.10629 7.7951 6.69598 8.35218 6.06337C8.50738 5.88712 8.64524 5.68033 8.92097 5.26674L8.92097 5.26673C9.91615 3.77396 10.4137 3.02757 10.7678 2.76691C12.1122 1.77711 14.0304 2.35791 14.6 3.92722ZM17.5304 9.46968C17.2375 9.17679 16.7626 9.17679 16.4697 9.46968C16.1768 9.76257 16.1768 10.2374 16.4697 10.5303L18.4394 12.5L16.4697 14.4697C16.1768 14.7626 16.1768 15.2374 16.4697 15.5303C16.7626 15.8232 17.2375 15.8232 17.5304 15.5303L19.5 13.5607L21.4697 15.5303C21.7626 15.8232 22.2375 15.8232 22.5304 15.5303C22.8233 15.2374 22.8233 14.7626 22.5304 14.4697L20.5607 12.5L22.5304 10.5303C22.8233 10.2374 22.8233 9.76257 22.5304 9.46968C22.2375 9.17679 21.7626 9.17679 21.4697 9.46968L19.5 11.4393L17.5304 9.46968Z"
                fill="currentColor"
              />
              <path
                :if={not @muted}
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M3.52984 2.46919C3.23695 2.17629 2.76208 2.17629 2.46918 2.46919C2.17629 2.76208 2.17629 3.23695 2.46918 3.52985L6.18885 7.24952L5.99951 7.24952L5.99787 7.24952L5.99622 7.24952L5.99458 7.24952L5.99293 7.24952L5.99128 7.24952L5.98964 7.24952L5.98799 7.24952L5.98635 7.24952L5.98471 7.24952L5.98306 7.24952L5.98142 7.24952L5.97978 7.24952L5.97813 7.24952L5.97649 7.24952L5.97485 7.24952L5.97321 7.24952L5.97156 7.24952L5.96992 7.24952L5.96828 7.24952L5.96664 7.24952L5.965 7.24952L5.96336 7.24952L5.96172 7.24952L5.96008 7.24952L5.95844 7.24952L5.9568 7.24952L5.95517 7.24952L5.95353 7.24952L5.95189 7.24952L5.95025 7.24952L5.94862 7.24952L5.94698 7.24952L5.94534 7.24952L5.94371 7.24952L5.94207 7.24952L5.94044 7.24952L5.9388 7.24952L5.93717 7.24952L5.93553 7.24952L5.9339 7.24952L5.93226 7.24952L5.93063 7.24952L5.929 7.24952L5.92736 7.24952L5.92573 7.24952L5.9241 7.24952L5.92247 7.24952L5.92084 7.24952L5.9192 7.24952L5.91757 7.24952L5.91594 7.24952L5.91431 7.24952L5.91268 7.24952L5.91105 7.24952L5.90942 7.24952L5.90779 7.24952L5.90617 7.24952L5.90454 7.24952L5.90291 7.24952L5.90128 7.24952L5.89965 7.24952L5.89803 7.24952L5.8964 7.24952L5.89477 7.24952L5.89315 7.24952L5.89152 7.24952L5.8899 7.24952L5.88827 7.24952L5.88665 7.24952L5.88502 7.24952L5.8834 7.24952L5.88177 7.24952L5.88015 7.24952L5.87853 7.24952L5.8769 7.24952L5.87528 7.24952L5.87366 7.24952L5.87204 7.24952L5.87041 7.24952L5.86879 7.24952L5.86717 7.24952L5.86555 7.24952L5.86393 7.24952L5.86231 7.24952L5.86069 7.24952L5.85907 7.24952L5.85745 7.24952L5.85583 7.24952L5.85422 7.24952L5.8526 7.24952L5.85098 7.24952L5.84936 7.24952L5.84775 7.24952L5.84613 7.24952L5.84451 7.24952L5.8429 7.24952L5.84128 7.24952L5.83966 7.24952L5.83805 7.24952L5.83643 7.24952L5.83482 7.24952L5.83321 7.24952L5.83159 7.24952L5.82998 7.24952L5.82836 7.24952L5.82675 7.24952L5.82514 7.24952L5.82353 7.24952L5.82192 7.24952L5.8203 7.24952L5.81869 7.24952L5.81708 7.24952L5.81547 7.24952L5.81386 7.24952L5.81225 7.24952L5.81064 7.24952L5.80903 7.24952L5.80742 7.24952L5.80581 7.24952L5.8042 7.24952L5.8026 7.24952L5.80099 7.24952L5.79938 7.24952L5.79777 7.24952L5.79617 7.24952L5.79456 7.24952L5.79295 7.24952L5.79135 7.24952L5.78974 7.24952L5.78814 7.24952L5.78653 7.24952L5.78493 7.24952L5.78332 7.24952L5.78172 7.24952L5.78012 7.24952L5.77851 7.24952L5.77691 7.24952L5.77531 7.24952L5.77371 7.24952L5.7721 7.24952L5.7705 7.24952L5.7689 7.24952L5.7673 7.24952L5.7657 7.24952L5.7641 7.24952L5.7625 7.24952L5.7609 7.24952L5.7593 7.24952L5.7577 7.24952L5.7561 7.24952L5.7545 7.24952L5.7529 7.24952L5.75131 7.24952L5.74971 7.24952L5.74811 7.24952L5.74652 7.24952L5.74492 7.24952L5.74332 7.24952L5.74173 7.24952L5.74013 7.24952L5.73854 7.24952L5.73694 7.24952L5.73535 7.24952L5.73375 7.24952L5.73216 7.24952L5.73057 7.24952L5.72897 7.24952L5.72738 7.24952L5.72579 7.24952L5.72419 7.24952L5.7226 7.24952L5.72101 7.24952L5.71942 7.24952L5.71783 7.24952L5.71624 7.24952L5.71465 7.24952L5.71306 7.24952L5.71147 7.24952L5.70988 7.24952L5.70829 7.24952L5.7067 7.24952L5.70511 7.24952L5.70352 7.24952L5.70194 7.24952L5.70035 7.24952L5.69876 7.24952L5.69717 7.24952L5.69559 7.24952L5.694 7.24952L5.69242 7.24952L5.69083 7.24952L5.68924 7.24952L5.68766 7.24952L5.68607 7.24952L5.68449 7.24952L5.68291 7.24952L5.68132 7.24952L5.67974 7.24952L5.67816 7.24952L5.67657 7.24952L5.67499 7.24952L5.67341 7.24952L5.67183 7.24952L5.67025 7.24952L5.66867 7.24952L5.66709 7.24952L5.66551 7.24952L5.66392 7.24952L5.66235 7.24952L5.66077 7.24952L5.65919 7.24952L5.65761 7.24952L5.65603 7.24952L5.65445 7.24952L5.65287 7.24952L5.6513 7.24952L5.64972 7.24952L5.64814 7.24952L5.64657 7.24952L5.64499 7.24952L5.64341 7.24952L5.64184 7.24952L5.64026 7.24952L5.63869 7.24952L5.63711 7.24952L5.63554 7.24952L5.63397 7.24952L5.63239 7.24952L5.63082 7.24952L5.62925 7.24952L5.62767 7.24952L5.6261 7.24952L5.62453 7.24952L5.62296 7.24952L5.62139 7.24952L5.61981 7.24952L5.61824 7.24952L5.61667 7.24952L5.6151 7.24952L5.61353 7.24952L5.61196 7.24952L5.6104 7.24952L5.60883 7.24952L5.60726 7.24952L5.60569 7.24952L5.60412 7.24952L5.60256 7.24952L5.60099 7.24952L5.59942 7.24952L5.59786 7.24952L5.59629 7.24952L5.59472 7.24952L5.59316 7.24952L5.59159 7.24952L5.59003 7.24952L5.58846 7.24952L5.5869 7.24952L5.58533 7.24952L5.58377 7.24952L5.58221 7.24952L5.58065 7.24952L5.57908 7.24952L5.57752 7.24952L5.57596 7.24952L5.5744 7.24952L5.57284 7.24952L5.57127 7.24952L5.56971 7.24952L5.56815 7.24952L5.56659 7.24952L5.56503 7.24952L5.56347 7.24952L5.56192 7.24952L5.56036 7.24952L5.5588 7.24952L5.55724 7.24952L5.55568 7.24952L5.55413 7.24952L5.55257 7.24952L5.55101 7.24952L5.54946 7.24952L5.5479 7.24952L5.54634 7.24952L5.54479 7.24952L5.54323 7.24952L5.54168 7.24952L5.54012 7.24952L5.53857 7.24952L5.53702 7.24952L5.53546 7.24952L5.53391 7.24952L5.53236 7.24952L5.5308 7.24952L5.52925 7.24952L5.5277 7.24952L5.52615 7.24952L5.5246 7.24952L5.52305 7.24952L5.52149 7.24952L5.51994 7.24952L5.51839 7.24952L5.51685 7.24952L5.5153 7.24952L5.51375 7.24952L5.5122 7.24952L5.51065 7.24952L5.5091 7.24952L5.50755 7.24952L5.50601 7.24952L5.50446 7.24952L5.50291 7.24952L5.50137 7.24952L5.49982 7.24952L5.49827 7.24952L5.49673 7.24952L5.49518 7.24952L5.49364 7.24952L5.4921 7.24952L5.49055 7.24952L5.48901 7.24952L5.48746 7.24952L5.48592 7.24952L5.48438 7.24952L5.48284 7.24952L5.48129 7.24952L5.47975 7.24952L5.47821 7.24952L5.47667 7.24952L5.47513 7.24952L5.47359 7.24952L5.47205 7.24952L5.47051 7.24952L5.46897 7.24952L5.46743 7.24952L5.46589 7.24952L5.46435 7.24952L5.46281 7.24952L5.46127 7.24952L5.45974 7.24952L5.4582 7.24952L5.45666 7.24952L5.45513 7.24952L5.45359 7.24952L5.45205 7.24952L5.45052 7.24952L5.44898 7.24952L5.44745 7.24952L5.44591 7.24952L5.44438 7.24952L5.44284 7.24952L5.44131 7.24952L5.43978 7.24952L5.43824 7.24952L5.43671 7.24952L5.43518 7.24952L5.43365 7.24952L5.43212 7.24952L5.43058 7.24952L5.42905 7.24952L5.42752 7.24952L5.42599 7.24952L5.42446 7.24952L5.42293 7.24952L5.4214 7.24952L5.41987 7.24952L5.41834 7.24952L5.41682 7.24952L5.41529 7.24952L5.41376 7.24952L5.41223 7.24952L5.41071 7.24952L5.40918 7.24952L5.40765 7.24952L5.40613 7.24952L5.4046 7.24952L5.40307 7.24952L5.40155 7.24952L5.40002 7.24952L5.3985 7.24952L5.39697 7.24952L5.39545 7.24952L5.39393 7.24952L5.3924 7.24952L5.39088 7.24952L5.38936 7.24952L5.38784 7.24952L5.38631 7.24952L5.38479 7.24952L5.38327 7.24952L5.38175 7.24952L5.38023 7.24952L5.37871 7.24952L5.37719 7.24952L5.37567 7.24952L5.37415 7.24952L5.37263 7.24952L5.37111 7.24952L5.36959 7.24952L5.36807 7.24952L5.36656 7.24952L5.36504 7.24952L5.36352 7.24952L5.36201 7.24952L5.36049 7.24952L5.35897 7.24952L5.35746 7.24952L5.35594 7.24952L5.35443 7.24952L5.35291 7.24952L5.3514 7.24952L5.34988 7.24952L5.34837 7.24952L5.34686 7.24952L5.34534 7.24952L5.34383 7.24952L5.34232 7.24952L5.3408 7.24952L5.33929 7.24952L5.33778 7.24952L5.33627 7.24952L5.33476 7.24952L5.33325 7.24952L5.33174 7.24952L5.33023 7.24952L5.32872 7.24952L5.32721 7.24952L5.3257 7.24952L5.32419 7.24952L5.32268 7.24952L5.32117 7.24952L5.31967 7.24952L5.31816 7.24952L5.31665 7.24952L5.31515 7.24952L5.31364 7.24952L5.31213 7.24952L5.31063 7.24952L5.30912 7.24952L5.30762 7.24952L5.30611 7.24952L5.30461 7.24952L5.3031 7.24952L5.3016 7.24952L5.3001 7.24952L5.29859 7.24952L5.29709 7.24952L5.29559 7.24952L5.29409 7.24952L5.29258 7.24952L5.29108 7.24952L5.28958 7.24952L5.28808 7.24952L5.28658 7.24952L5.28508 7.24952L5.28358 7.24952L5.28208 7.24952L5.28058 7.24952L5.27908 7.24952L5.27758 7.24952L5.27609 7.24952L5.27459 7.24952L5.27309 7.24952L5.27159 7.24952L5.2701 7.24952L5.2686 7.24952L5.2671 7.24952L5.26561 7.24952L5.26411 7.24952L5.26262 7.24952L5.26112 7.24952L5.25963 7.24952L5.25813 7.24952L5.25664 7.24952L5.25514 7.24952L5.25365 7.24952L5.25216 7.24952L5.25067 7.24952L5.24917 7.24952L5.24768 7.24952L5.24619 7.24952L5.2447 7.24952L5.24321 7.24952L5.24172 7.24952L5.24023 7.24952L5.23874 7.24952L5.23725 7.24952L5.23576 7.24952L5.23427 7.24952L5.23278 7.24952L5.23129 7.24952L5.2298 7.24952L5.22831 7.24952L5.22683 7.24952L5.22534 7.24952L5.22385 7.24952L5.22237 7.24952L5.22088 7.24952L5.21939 7.24952L5.21791 7.24952L5.21642 7.24952L5.21494 7.24952L5.21345 7.24952L5.21197 7.24952L5.21049 7.24952L5.209 7.24952L5.20752 7.24952L5.20604 7.24952L5.20455 7.24952L5.20307 7.24952L5.20159 7.24952L5.20011 7.24952L5.19863 7.24952L5.16819 7.24952C4.63434 7.2495 4.1887 7.2495 3.8246 7.27926C3.44481 7.3103 3.08826 7.37742 2.75104 7.54925C2.23359 7.8129 1.8129 8.2336 1.54925 8.75104C1.3774 9.0883 1.31029 9.44496 1.27925 9.82485C1.24949 10.1891 1.2495 10.6349 1.24951 11.1691L1.24951 11.1995L1.24951 12.7995L1.24951 12.83C1.2495 13.3641 1.24949 13.81 1.27925 14.1742C1.31029 14.5541 1.3774 14.9107 1.54925 15.248C1.8129 15.7654 2.23359 16.1861 2.75104 16.4498C3.0883 16.6216 3.44496 16.6887 3.82484 16.7198C4.18905 16.7495 4.63486 16.7495 5.16897 16.7495L5.16906 16.7495L5.19951 16.7495L6.49119 16.7495C6.94909 16.7495 7.07274 16.7531 7.17879 16.7747C7.41754 16.8234 7.63686 16.9407 7.80978 17.1124C7.88659 17.1886 7.95814 17.2895 8.21214 17.6705L8.22654 17.6921C8.81298 18.5718 9.27125 19.2592 9.64302 19.7546C9.99472 20.2233 10.3587 20.6499 10.7777 20.8577C12.0791 21.503 13.6579 21.025 14.3827 19.7662C14.6161 19.3609 14.6823 18.804 14.715 18.219C14.7485 17.6188 14.7495 16.823 14.7495 15.8102L20.4692 21.5298C20.7621 21.8227 21.237 21.8227 21.5298 21.5298C21.8227 21.237 21.8227 20.7621 21.5298 20.4692L14.5298 13.4692L8.33031 7.26965L3.52984 2.46919ZM14.3827 4.23287C13.6579 2.97406 12.0791 2.49603 10.7777 3.14138C10.4564 3.30074 10.1822 3.57839 9.93595 3.87262C9.67894 4.17975 9.3898 4.5836 9.05302 5.07626C8.85253 5.36956 8.88533 5.76329 9.13158 6.01937L13.4589 10.5194C13.671 10.74 13.9959 10.8095 14.2797 10.6952C14.5636 10.5809 14.7495 10.3055 14.7495 9.99952L14.7495 8.30784L14.7495 8.28188C14.7495 7.22467 14.7495 6.39851 14.715 5.78007C14.6823 5.19501 14.6161 4.63817 14.3827 4.23287ZM18.416 5.37581C18.0716 5.14577 17.6058 5.23853 17.3758 5.583C17.1458 5.92746 17.2385 6.39319 17.583 6.62322C19.1505 7.67003 20.2495 9.66441 20.2495 11.9995C20.2495 12.9755 20.057 13.895 19.7168 14.7109C19.5854 15.0262 19.432 15.3258 19.2593 15.6072C19.0427 15.9602 19.1532 16.4221 19.5062 16.6387C19.8593 16.8554 20.3211 16.7449 20.5378 16.3918C20.7516 16.0434 20.9403 15.6743 21.1014 15.2881C21.518 14.2886 21.7495 13.173 21.7495 11.9995C21.7495 9.20694 20.4353 6.7243 18.416 5.37581ZM17.416 9.37581C17.0716 9.14577 16.6058 9.23853 16.3758 9.583C16.1458 9.92746 16.2385 10.3932 16.583 10.6232C16.9549 10.8716 17.2495 11.3736 17.2495 11.9995C17.2495 12.2591 17.1983 12.5001 17.1105 12.7109C16.9511 13.0933 17.1318 13.5324 17.5141 13.6918C17.8964 13.8512 18.3356 13.6704 18.495 13.2881C18.6593 12.8938 18.7495 12.4565 18.7495 11.9995C18.7495 10.9162 18.2397 9.92587 17.416 9.37581Z"
                fill="currentColor"
              />
            </svg>
          </button>
        </div>
      </div>
      <div>
        <span class="px-4 text-white text-shadow-green lowercase text-sm">
          {@title}
        </span>
      </div>
    </div>
    """
  end

  def handle_event("play", _params, socket) do
    {:noreply, push_event(socket, "playVideo", %{}) |> assign(:playing, true)}
  end

  def handle_event("pause", _params, socket) do
    {:noreply, push_event(socket, "pauseVideo", %{}) |> assign(:playing, false)}
  end

  def handle_event("next_station", _params, socket) do
    send(self(), {:change_video, socket.assigns.position + 1, socket.assigns.volume})

    {:noreply, socket}
  end

  def handle_event("prev_station", _params, socket) do
    send(self(), {:change_video, socket.assigns.position - 1, socket.assigns.volume})
    {:noreply, socket}
  end

  def handle_event("set_volume", %{"volume" => volume}, socket) do
    {:noreply,
     socket
     |> push_event("setVolume", %{volume: volume})
     |> assign(:volume, String.to_integer(volume))}
  end

  def handle_event("mute", _params, socket) do
    {:noreply,
     socket
     |> push_event("toggleMute", %{})
     |> assign(:muted, !socket.assigns.muted)}
  end

  def handle_event("player_state_changed", %{"state" => state}, socket) do
    # YouTube states: -1 (unstarted), 0 (ended), 1 (playing), 2 (paused), 3 (buffering), 5 (cued)
    playing = state == 1
    {:noreply, assign(socket, :playing, playing)}
  end
end
